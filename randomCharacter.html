<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  <style>
    *, body { 
      font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
      align-items: center;
      justify-content: center;
      flex-direction: column;
      text-align: center;
    }

    button {
      margin-top: 2em;
      padding: 0.5em 1em;
      font-size: larger;
    }

    header {
      margin-top: 3em;
      text-align: center;
      font-size: xx-large;
    }

    .main-container {
      margin: 3em 0;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-direction: column;
      text-align: center;
    }

    #name {
      visibility: hidden;
    }

    .name-container {
      min-height: 3.5em;
    }

    .table-container {
      min-height: 10em;
    }

    #information-container-table {
      visibility: hidden;
    }

    .basic-info-title {
      text-align: end;
      padding-right: 1em;
    }

    .basic-info {
      text-align: start;
    }

  </style>
  <header>
    Random Star Wars Character 
  </header>
  <div class="main-container">
    <div class="name-container">
      <h1 id="name"></h1>
    </div>
    <div class ="table-container">
      <table id="information-container-table">
      <tr>
        <td class="basic-info-title">Height:</td>
        <td id="height" class="basic-info"></td>
      </tr>
      <tr>
        <td class="basic-info-title">Mass:</td>
        <td id="mass" class="basic-info"></td>
      </tr>
      <tr>
        <td class="basic-info-title">Gender:</td>
        <td id="gender" class="basic-info"></td>
      </tr>
      <tr>
        <td class="basic-info-title">Birth Year:</td>
        <td id="birth_year" class="basic-info"></td>
      </tr>
      <tr>
        <td class="basic-info-title">Homeworld:</td>
        <td id="homeworld" class="basic-info"></td>
      </tr>
      </table>
    </div>
  </div>
  <button onclick="getRandomCharacter()">Random Character</button>


  <script>
    const fetchHomeworld = async (url) => {
      try {
        const homeworld = await fetch(url)
        const response = await homeworld.json();
        return response.name;
      } catch (error) {
        console.log(error);
      }
    }

    const fetchFilms = async (url) => {
      try {
        const response = await fetch(url);
        const film = await response.json();
        return film.name;
      } catch(error) {
        console.log(error);
      }
    }


    const getRandomCharacter = async () => {
      const characterNumber = Math.floor(Math.random() * 84);
      const response  = await fetch(`https://swapi.info/api/people/${characterNumber}`);
      const json = await response.json();
      const {name, height, mass, gender, birth_year, homeworld, films} = json
      console.log(json)
      document.getElementById("name").innerText = `${name}`;
      document.getElementById("height").innerText = `${height}`;
      document.getElementById("mass").innerText = `${mass}`;
      document.getElementById("gender").innerText = `${gender}`;
      document.getElementById("birth_year").innerText = `${birth_year}`;
            
      const characterHomeworld = await fetchHomeworld(homeworld);
      document.getElementById("homeworld").innerText = `${characterHomeworld}`;

      document.getElementById("information-container-table").style.visibility = "visible";
      document.getElementById("name").style.visibility = "visible";
    }
    
  </script>
</body>
</html>